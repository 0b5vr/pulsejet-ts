/*! (c) 2021 FMS_Cat - https://github.com/FMS-Cat/pulsejet-ts/blob/master/LICENSE */
const t="PLSJ",n=0,o=1,r=1024,e=8,s=2048,c=256,f=20,a=856;var l;!function(t){t[t.Long=0]="Long",t[t.Short=1]="Short",t[t.Start=2]="Start",t[t.Stop=3]="Stop"}(l||(l={}));const i=[8,8,8,8,8,8,8,8,16,16,24,32,32,40,48,64,80,120,144,176];function u(t,n){const o=Math.sin(Math.PI/n*t);return Math.sin(Math.PI/2*o*o)}function h(t,n,o){const r=t+.5;if(o===l.Start){const n=1472;if(t>=n+128)return 0;if(t>=n)return 1-u(r-n,256);if(t>=1024)return 1}else if(o===l.Stop){const n=448;if(t<n)return 0;if(t<n+128)return u(r-n,256);if(t<1024)return 1}return u(r,n)}function S(t){const n=new DataView(t.buffer,t.byteOffset,t.byteLength);let o=0;o+=8;let r=n.getUint16(o,!0);o+=2;const e=1024*r,s=new Float32Array(e);r++;let c=o;o+=r;let f=o;o+=856*r;const a=new Float32Array(e+2048),u=new Uint8Array(20);for(let e=0;e<r;e++){const r=t[c++];let s=1,S=0,M=2048;r===l.Short&&(s=8,S=448,M=256);for(let c=0;c<s;c++){const l=new Float32Array(1024);let w=0;for(let r=0;r<20;r++){const e=i[r]/s;let c=0;for(let t=0;t<e;t++){const o=n.getInt8(f++);o&&c++;const r=o;l[w+t]=r}const a=c/e,h=.1;if(a<h){const t=(h-a)/h,n=t*t;for(let t=0;t<e;t++){const o=2*Math.random()-1;l[w+t]+=o*n}}const S=t[o++],M=u[r]+S&255;u[r]=M;const y=Math.pow(2,M/64*40-20)*e;let g=1e-27;for(let t=0;t<e;t++){const n=l[w+t];g+=n*n}g=Math.sqrt(g);const p=y/g;for(let t=0;t<e;t++)l[w+t]*=p;w+=e}const y=1024*e,g=S+c*M/2;for(let t=0;t<M;t++){const n=t+.5;let o=0;for(let t=0;t<M>>1;t++)l[t]&&(o+=2/(M>>1)*l[t]*Math.cos(Math.PI/(M>>1)*(n+(M>>2))*(t+.5)));const e=h(t,M,r);a[y+g+t]+=o*e}}}return s.set(new Float32Array(a.buffer,4096,e)),s}export{l as WindowMode,i as bandToNumBins,n as codecVersionMajor,o as codecVersionMinor,S as decode,r as frameSize,s as longWindowSize,h as mdctWindow,f as numBands,e as numShortWindowsPerFrame,a as numTotalBins,t as sampleTag,c as shortWindowSize,u as vorbisWindow};
